jQuery(document).ready(function(e){var a=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(a=!0);var t=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",url:"https://"+streamium_uploader.bucket+".s3.amazonaws.com/",drop_element:"streamium-uploader",browse_button:"streamium-add-to-queue",container:document.getElementById("streamium-uploader"),flash_swf_url:"/wp-includes/js/plupload/plupload.flash.swf",silverlight_xap_url:"/wp-includes/js/plupload/plupload.silverlight.xap",urlstream_upload:!0,file_data_name:"file",multipart:!0,multipart_params:{acl:"private",success_action_status:"201",key:"${filename}",Filename:"${filename}",AWSAccessKeyId:streamium_uploader.app,policy:streamium_uploader.policy,signature:streamium_uploader.signature},filters:{max_file_size:streamium_uploader.filesize+"mb",mime_types:[{title:"Allowed files",extensions:streamium_uploader.filetypes}]},init:{PostInit:function(){},FilesAdded:function(e,a){},QueueChanged:function(e,a){e.files.length&&e.start()},BeforeUpload:function(e,t){if(a){var r=Math.floor(1e4*Math.random())+1+"_";""!=streamium_uploader.folder?(e.settings.multipart_params.key=streamium_uploader.folder+"/"+r+t.name,e.settings.multipart_params.Filename=streamium_uploader.folder+"/"+r+t.name):(e.settings.multipart_params.key=r+t.name,e.settings.multipart_params.Filename=r+t.name)}else""!=streamium_uploader.folder?(e.settings.multipart_params.key=streamium_uploader.folder+"/"+t.name,e.settings.multipart_params.Filename=streamium_uploader.folder+"/"+t.name):(e.settings.multipart_params.key=t.name,e.settings.multipart_params.Filename=t.name)},UploadProgress:function(a,t){e("#streamium-uploader span.streamium-uploader-percent").text(t.percent),e("#streamium-uploader span.streamium-uploader-label").html("Started"),e(".streamium-uploader-progressbar").css("width",t.percent+"%"),e("#streamium-uploader span.streamium-uploader-standby").html(t.percent+"%")},FileUploaded:function(a,t){a.files.length==a.total.uploaded+a.total.failed&&(e("#streamium-uploader span.streamium-uploader-label").html("Uploaded"),e(".streamium-uploader-standby").html("Files successfully uploaded"),e.post(streamium_object.ajax_url,{action:"streamium_user_content_uploader_email",bucket:streamium_uploader.bucket,folder:streamium_uploader.folder,security:streamium_uploader.nonce},function(e){console.log(e)}))},StateChanged:function(e,a){},Error:function(e,a){}}});t.init()});